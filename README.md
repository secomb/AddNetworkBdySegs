# AddNetworkBdySegs

Program to restore boundary segments to microvessel networks derived from image stacks

This program is designed to be used to enhance network.dat files generated by AnalyzeAmiraFile

If an arteriole or venule has a capillary branch near where it crosses the domain boundary, the short segment beyond the branch is often lost because AnalyzeAmiraFile assumes that very short blind-ended vessels are artifacts. This program replaces such stubs under the following conditions:
- a two-segment node is present with a large discrepancy in the diameters of the connected segments
- the node is near the domain boundary
- the segments are not nearly parallel

In that case, the larger segment is extended to form a new segment terminating in a boundary node (i.e., a one-segment node). The program also allows manual selection of nodes needing an additional segment. This may occur, for instance, when a bifurcation of two large vessels lies on the boundary, and is represented as a V rather than a Y in the resulting network file.

The program is controlled by AddBdySegs.dat, which has the following sample structure:
 
50 boundary_width, only create new boundary segments within this distance of the domain boundary  
1.5 diam_ratio, only create new boundary segments if diameter ratio is greater than this  
15 diam0, create list of boundary segments with diameters above this  
100	max_n, maximum number of new boundary segments to add  
2  number of nodes at which to add segments - list node names below  
317  
423  

The program reads Network.dat and writes NetworkNew.dat.

TWS, May 2019